{% extends "master.html" %}

{% block title %}
    <title>Categories</title>
{% endblock %}
{% block submenu %}
<div>
  <nav class="navbar navbar-expand-lg bg-light" id="network_nav">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Categories</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/add-category/">Add category</a>
            <!-- <a class="nav-link" aria-current="page" data-bs-toggle="offcanvas" href="#categorySidebar" role="button" aria-controls="offcanvasExample">Add category</a> -->
          </li>      
          
        </ul>
      </div>
    </div>
  </nav>
  </div>

{% endblock %}
{% block content %}
<div class="container"> 

<table class="table table-responsive table-borderless align-middle w-auto mt-2">


  <tr>
    <td>Enabled</td>

  </tr>
{% for x in categories %}
<tr id="row{{x.id}}">
{% if x.editable %}
<td>
  <div class="container">
  <form method="post" id="switch">
  <div class="form-check form-switch">
    {% if x.enabled %}
    <!-- <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" onchange=this.form.submit() checked> -->
    <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value='{"id": {{x.id}}, "ob_type": "category"}' onchange="saveSwitch(this.value)" checked>
    {% else %}
    <!-- <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" onchange=this.form.submit()> -->
    <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value='{"id": {{x.id}}, "ob_type": "category"}' onchange="saveSwitch(this.value)">
    {% endif %}
  </div>
</form>
</div>
</td>
<td class="text-center"><form action="/edit-category/{{x.id}}" onsubmit="showPleaseWait()">
  <!-- {% csrf_token %} -->
  <!-- <input type="hidden" id="node_id" type="text" name="node_id" value={{x.id}}> -->

  <input type="image" name="submit" src="/static/icons/pencil.svg" alt="Submit" style="width:20px;height:auto;"  />
</form></td>
<td>
  <form id="del{{x.id}}" onsubmit="return false;">
    <!-- {% csrf_token %} -->
    <!-- <input type="hidden" id="del_node" type="text" name="del_node" value={{x.id}}> -->
    <!-- <button type="submit" class="btn btn-secondary btn-sm">Delete</button> -->
    <input type="image" src="/static/icons/trash3.svg" value='{"id": {{x.id}}, "ob_type": "category", "backup": true}' onclick="delAJAX(this.value)" style="width:20px;height:auto;"/>
  </form>
  </td>
{% else %}
<td></td>
<td></td>
<td></td>
{% endif %}

<td style="width: 20px">
  <a>{{x.category_code}}</a>
</td>
<td>
  <a>{{x.category_text}}</a>
</td>


</tr>
{% endfor %}
</table>
<p></p>
</div>  
{% endblock %}
